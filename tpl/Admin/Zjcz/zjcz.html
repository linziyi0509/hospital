<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>专家排班</title>
        <script src="__ADMIN_ACEADMIN__/js/jquery.min.js"></script>
        <style>
            .hide{
                display: none;
            }
            .xinq td{
                text-align: center;
            }
            .rili{
                width: 841px;
                overflow: hidden;
                box-sizing: border-box;
                border-top: 1px solid #000;
                border-left: 1px solid #000;    
            }
            .rili>div{
                width: 120px;
                box-sizing: border-box;
                border-bottom: 1px solid #000;
                border-right: 1px solid #000;
                text-align: center;
                float: left;
                overflow: hidden;
                height: 56px;
                line-height: 56px;
            }
            .red{
                color: #fff;
                background: lightcoral;
                float: right;
                width: 80px;
                height: 28px;
                line-height: 28px;
                box-sizing: border-box;
                border-bottom: 1px solid #000;
            }
            .redx{
                color: #fff;
                background: lightcoral;
                float: right;
                width: 80px;
                height: 28px;
                line-height: 28px;
                box-sizing: border-box;
                border-bottom: 1px solid #000;
            }
            .shu{
                float: left;
                width: 39px;
                height: 56px;
                box-sizing: border-box;
                border-right: 1px solid #000;
            }
        </style>
    </head>
    <body>
    <form action="{:U('zjcz')}" method="post">
        <div>{$zjname}专家排班计划</div>
        <div>月份</div>
        <div>
            <select id="next" name="next">
                <option name="next" value="<?php echo $dq;?>"><?php echo $yuefen;?></option>
                <option name="next" value="<?php echo $jc;?>"><?php echo $jcyuefen;?></option>
            </select>
            <!-- <span>每日号数：</span><input type="text" name="ticket" /><span style="color:red">(必填)</span> -->
        </div>
<!--     <div>星期</div>
    <table class="xinq" border="1" cellspacing="0">
        <tbody>
            <tr>
                <th width="100">星期</th>
                <th width="100">日</th> 
                <th width="100">一</th> 
                <th width="100">二</th>
                <th width="100">三</th>
                <th width="100">四</th>
                <th width="100">五</th>
                <th width="100">六</th>
            </tr>
            <tr>
                <th>上午</th>
                <td>
                    <input type="checkbox" name="am" id="oo"class="hide"/>
                    <label for="oo"><img src="__ADMIN_ACEADMIN__/avatars/0.gif"></label>
                </td>
                <td>
                    <input type="checkbox" name="am" id="ow"class="hide"/>
                    <label for="ow"><img src="__ADMIN_ACEADMIN__/avatars/0.gif"></label>
                </td>
                <td>
                    <input type="checkbox" name="am" id="ot"class="hide"/>
                    <label for="ot"><img src="__ADMIN_ACEADMIN__/avatars/0.gif"></label>
                </td>
                <td>
                    <input type="checkbox" name="am" id="os"class="hide"/>
                    <label for="os"><img src="__ADMIN_ACEADMIN__/avatars/0.gif"></label>
                </td>
                <td>
                    <input type="checkbox" name="am" id="of"class="hide"/>
                    <label for="of"><img src="__ADMIN_ACEADMIN__/avatars/0.gif"></label>
                </td>
                <td>
                    <input type="checkbox" name="am" id="ol"class="hide"/>
                    <label for="ol"><img src="__ADMIN_ACEADMIN__/avatars/0.gif"></label>
                </td>
                <td>
                    <input type="checkbox" name="am" id="oq"class="hide"/>
                    <label for="oq"><img src="__ADMIN_ACEADMIN__/avatars/0.gif"></label>
                </td>
            </tr>
            <tr>
                <th>下午</th>
                <td>
                    <input type="checkbox" name="am" id="wo"class="hide"/>
                    <label for="wo"><img src="__ADMIN_ACEADMIN__/avatars/0.gif"></label>
                </td>
                <td>
                    <input type="checkbox" name="am" id="ww"class="hide"/>
                    <label for="ww"><img src="__ADMIN_ACEADMIN__/avatars/0.gif"></label>
                </td>
                <td>
                    <input type="checkbox" name="am" id="wt"class="hide"/>
                    <label for="wt"><img src="__ADMIN_ACEADMIN__/avatars/0.gif"></label>
                </td>
                <td>
                    <input type="checkbox" name="am" id="ws"class="hide"/>
                    <label for="ws"><img src="__ADMIN_ACEADMIN__/avatars/0.gif"></label>
                </td>
                <td>
                    <input type="checkbox" name="am" id="wf"class="hide"/>
                    <label for="wf"><img src="__ADMIN_ACEADMIN__/avatars/0.gif"></label>
                </td>
                <td>
                    <input type="checkbox" name="am" id="wl"class="hide"/>
                    <label for="wl"><img src="__ADMIN_ACEADMIN__/avatars/0.gif"></label>
                </td>
                <td>
                    <input type="checkbox" name="am" id="wq" class="hide"/>
                    <label for="wq"><img src="__ADMIN_ACEADMIN__/avatars/0.gif"></label>
                </td>
            </tr>
        </tbody>
    </table>
    <div>-->
        <input type="hidden" name="zid" id="zid" value="<?php echo $zid;?>">
<!--         <input type="hidden" name="n" value="">
        <input type="hidden" name="week" value="" id="week">
        <input type="submit" value="提交">
    </div>  -->
    </form>
    <div>日历</div>
    <form action="{:U('getweek')}?zid=<?php echo $zid;?>&next=<?php echo $next;?>" method="post">
            <div class="rili">
            <div >星期日</div> 
            <div >星期一</div> 
            <div >星期二</div>
            <div >星期三</div>
            <div >星期四</div>
            <div >星期五</div>
            <div >星期六</div>
            <!--遍历下面-->
            <!---->
            <?php for ($i=0; $i < $xingqi; $i++) { ?>
                    <?php echo $a='<div></div>' ?>                      
            <?php }  ?>                     
              <?php foreach ($Tmonth as $key => $va): ?>
                <div>
                    <div class="shu"><?php echo $va['t']; ?></div>
                    <div class="red">上午</div>
                    <div class="redx">下午</div>
                </div>
                <!-- <option value="{$g['ksname']}">{$g['ksname']}</option> -->
              <?php endforeach ?>
            

        </div>
        <input type="hidden" name="swczj" id="swczj" value="">
        <input type="hidden" name="xwczj" id="xwczj" value="">
        <div><span>每日号数：</span><input type="text" name="ticket" /><span style="color:red">(必填)</span></div>
    <div><input type="submit" value="提交"></div>
    </form>
    </body>
    
    <script type="text/javascript">
        //专家星期选择
        var oneA=[0,0,0,0,0,0,0,0,0,0,0,0,0,0];////为返回的选中的数组
        var qq=$(".xinq img");
        var qtd=$(".xinq td");
        // var oneA = "";
        // console.log(qq);
        for(var i=0;i<$(".xinq img").length;i++) {
            // oneA[i]=0;
            if(oneA[i]==1){
                qq[i].src="/Public/statics/aceadmin/avatars/1.gif"; 
               }else{
                qq[i].src="/Public/statics/aceadmin/avatars/0.gif";
               }
            qtd[i].onclick=function(e){
                for(var j=0; j<$(".xinq img").length; j++){
                    if(this==qtd[j]){
                        if(oneA[j]==0){
                            qq[j].src="/Public/statics/aceadmin/avatars/1.gif";
                            oneA[j]=1;
                        }
                        else if(oneA[j]==1){
                            qq[j].src="/Public/statics/aceadmin/avatars/0.gif"; 
                            oneA[j]=0;
                        }
                    }
                    e.preventDefault();
                    e.stopPropagation();
                }
                        $('#week').val(oneA);


                        console.log(oneA);
            }
        }
                        // document.getElementById("week").value=oneA;



//      日历+
        //上午
        var ssw=[<?php echo $zjpb['swcz']; ?>];
        var twoA=[];//为返回的选中的数组
        var rl=$(".red");
        for(var i=0;i<rl.length;i++) {
            //判断是否存在于数组中
            if(IsInArray(ssw,i+1)==false){
                twoA[i]=0;
            }else{
                twoA[i]=1;
                console.log(twoA[i-1])
            }
            if(twoA[i]==1){
                rl[i].style.background="green";
               }else{
                rl[i].style.background="lightcoral";
            }

            if(this==rl[i])
            {
                if(twoA[i]==0)
                {
                    this.style.background="green";
                    twoA[i]=1;
                }
                else if(twoA[i]==1)
                {
                    this.style.background="lightcoral";
                    twoA[i]=0;
                }
            }
            rl[i].onclick=function(){
                for(var j=0; j<rl.length; j++){
                    if(this==rl[j]){
                        if(twoA[j]==0){
                            this.style.background="green";
                            twoA[j]=1;
                        }
                        else if(twoA[j]==1){
                            this.style.background="lightcoral";
                            twoA[j]=0;
                        }
                    }
                }
                console.log(twoA);
                // $('#week').val(oneA);
                $('#swczj').val(twoA);
            }
        }
        $('#swczj').val(twoA);
        //下午
        var xxw=[<?php echo $zjpb['xwzc']; ?>];
        var twob=[];//为返回的选中的数组
        var rlx=$(".redx");
        for(var i=0;i<rlx.length;i++) {
            //判断是否存在于数组中
            if(IsInArray(xxw,i+1)==false){
                twob[i]=0;
            }else{
                twob[i]=1;
            }
            if(twob[i]==1){
                rlx[i].style.background="green";
               }else{
                rlx[i].style.background="lightcoral";
               }

            if(this==rlx[i])
            {
                if(twob[i]==0)
                {
                    this.style.background="green";
                    twob[i]=1;
                }
                else if(twob[i]==1)
                {
                    this.style.background="lightcoral";
                    twob[i]=0;
                }
            }

      //       $('#xwczj').val(twob);
            // console.log(twob);
            rlx[i].onclick=function(){
                for(var j=0; j<rlx.length; j++){
                    if(this==rlx[j]){
                        if(twob[j]==0){
                            this.style.background="green";
                            twob[j]=1;
                        }
                        else if(twob[j]==1){
                            this.style.background="lightcoral"; 
                            twob[j]=0;
                        }   
                    }
                }   
            // console.log(twob);
            $('#xwczj').val(twob);
            }

        }
        // console.log(twob);
        $('#xwczj').val(twob);
        //判断数组中是否存在某个字符js
        function IsInArray(arr,val){ 
        　　var testStr=','+arr.join(",")+","; 
        　　return testStr.indexOf(","+val+",")!=-1; 
        } 

        $('#next').change(function(){
            var next = $('#next').val();
            var zid = $('#zid').val();
            window.location.href="{:U(zjcz)}?next=" + next +"&id=" + zid;
        });
    </script>
</html>