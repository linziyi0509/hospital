<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="UTF-8">
<title>数据检索</title>
<link href="__ADMIN_ACEADMIN__/css/global.css" rel="stylesheet" type="text/css">
<link href="__ADMIN_ACEADMIN__/css/booking.css" rel="stylesheet" type="text/css">
<script src="__ADMIN_ACEADMIN__/js/jquery-1.8.3.min.js"></script>
<script src="__ADMIN_ACEADMIN__/js/laydate/laydate.js"></script>
<script src="__ADMIN_ACEADMIN__/js/common.js"></script> 
<script src="__ADMIN_ACEADMIN__/js/booking.js"></script>
<!--[if lt IE 9]>
    <script src="js/html5shiv.min.js"></script>
<![endif]-->
</head>
<body>

<script> 

    //弹窗
    function sPopup(num){   
        //模拟数据
        
        var data = {:($data)}; 
        console.log(data)
        // var data=[['初诊','复诊'],['中医肿瘤科','妇科','中医消化科','中老年病','中医神经科','中医呼吸科','中医皮肤科'],['张文彭','王医生','李主任','赵医生'],['种植牙','烤瓷牙','补牙','祛斑'],['报纸','其他','91160'],['网络','电话','微信']];
        var name = '';
        if (num == 0) {
            name = 'cf';
        } else if (num == 1) {
            name = 'ks';
        } else if (num == 2) {
            name = 'zj';
        } else if (num == 3) {
            name = 'bz';
        } else if (num == 4) {
            name = 'ly';
        } else if (num == 5) {
            name = 'fs';
        }  
        var str='';
        // for(var i=0;i<data[num].length;i++){
        //     str+='<li><label><em><i></i></em><input name="ks" type="checkbox" value="'+data[num][i]+'"/>'+data[num][i]+'</label></li>';
        // }
        for (var i = 0; i < data[num].length; i++) {
            str+='<li><label><em><i></i></em><input class="quzhi" name="' + name + '" type="checkbox"value="' + data[num][i] + '"/>' + data[num][i] + '</label></li>';
        }
        $('.sPopup-list').html(str);
        $('.searchPopup').fadeIn(200);
        textInputFocus('.searchPopup .searchText .t','请输入搜索关键字',null,null,null);
        $('.searchText .t').focus();
        searchList();

        $('.searchPopup-con ul input').click(function(){
            console.log($(this));
            if($(this).is(':checked')){
                $(this).parent().find('i').css('display','block');
                 $(this).attr("checked", "checked");
            }else{
                $(this).parent().find('i').css('display','none');
                 $(this).attr("checked", "checked");
            }
        })

        $('.searchPopup .close').click(function(){
            $('.searchPopup').fadeOut(200,function(){
                $('.sPopup-list').empty();
            });
            
        })
        $('.searchPopup .close-btn').click(function(){
            $('.searchPopup').fadeOut(200,function(){
                $('.sPopup-list').empty();
            });
        })
    } 
    //表格
    function table1(){
        //模拟数据
        var data=[];
        var data ={:($make)};   

        // var data=[{
        //     operator:'刘芳芳1',
        //     id:40758,
        //     name:'崔笑波',
        //     tel:18510298818,
        //     yytime:'2019-01-01 11:11:42',
        //     doctor:'张文彭',
        //     type:'其他',
        //     come:'✔',
        //     style:'预约到诊',
        //     consume:'X',
        //     live:'X',
        //     first:'初诊',
        //     tjtime:'2019-01-01 11:11:42'
        // },{
        //     operator:'刘芳芳2',
        //     id:40758,
        //     name:'崔笑波',
        //     tel:18510298818,
        //     yytime:'2019-01-01 11:11:42',
        //     doctor:'张文彭',
        //     type:'其他',
        //     come:'✔',
        //     style:'预约到诊',
        //     consume:'X',
        //     live:'X',
        //     first:'初诊',
        //     tjtime:'2019-01-01 11:11:42'
        // },{
        //     operator:'刘芳芳3',
        //     id:40758,
        //     name:'崔笑波',
        //     tel:18510298818,
        //     yytime:'2019-01-01 11:11:42',
        //     doctor:'张文彭',
        //     type:'其他',
        //     come:'✔',
        //     style:'预约到诊',
        //     consume:'X',
        //     live:'X',
        //     first:'初诊',
        //     tjtime:'2019-01-01 11:11:42'
        // }];
        var str="";
        for(var i=0;i<data.length;i++){
            str+='<tr><td>'+data[i].huawu+'</td><td>'+data[i].id+'</td><td>'+data[i].name+'</td><td>'+data[i].phone+'</td><td>'+data[i].yuyuetime+'</td><td>'+data[i].yuyuezj+'</td><td>'+data[i].yuyuebz+'</td><td><b>'+data[i].diagnosis+'</b></td><td>'+data[i].again+'</td><td><em>'+data[i].consumption+'</em></td><td><em>'+data[i].hospital+'</em></td><td>'+data[i].again+'</td><td>'+data[i].time+'</td><td><a href="javascript:;" class="revise"></a><a href="javascript:;" class="del"></a></td></tr>';
        }
        $('#table1').append(str);
        $('#table1 tr:odd').css('backgroundColor','#fff');
    }    
</script>
<div class="commonTit"><h2><span>预约系统</span></h2></div>
<div class="conBox booking">
    <form action="" method="post" id="form1">
        <div class="booking-top">
            <dl>
                <dt>姓名</dt>
                <dd><input type="text" id='hzname' > </dd>
            </dl>
            <dl>
                <dt>电话</dt>
                <dd><input type="text" id="hzphone"></dd>
            </dl>
            <dl class="yyTime">
                <dt>预约时间</dt>
                <dd>
                    <input type="text" class="datepicker1" id='starttime'> 至 <input type="text" class="datepicker2" id ='endtime'>
                    <span><b>今天</b> | <b>昨天</b> | <b>最近七天</b> | <b>本周</b> | <b>本月</b></span>
                </dd>
            </dl>
        </div>
        <ul>
            <!-- <?php print_r($govern)?> -->
            <li><input type="text" value="初复诊" id='again'></li>
            <li><input type="text" value="所有科室" id='ksname'></li>
            <li><input type="text" value="所有专家" id='yuyuezj'></li>
            <li><input type="text" value="所有病种" id='yuyuebz'></li>
            <li><input type="text" value="媒体来源" id='mtly'></li>
            <li><input type="text" value="预约方式" id='yyfs'></li>
            <li class="search-btn"><input type="button" value="搜索" ></li>
        </ul>
        
    </form>
    <table id="table1" >
        <tr>
            <th>话务员</th>
            <th>患者编号</th>
            <th>患者姓名</th>
            <th>电话</th>
            <th>到诊时间</th>
            <th>预约专家</th>
            <th>病种类型</th>
            <th>到诊</th>
            <th>到诊类型</th>
            <th>消费</th>
            <th>住院</th>
            <th>初/复诊</th>
            <th>提交时间</th>
            <th>操作</th>
        </tr>

    </table>
    <div class="commonPage">
        <ul>
            <li>显示行数：</li>
            <li>
                <select>
                  <option value ="10">10</option>
                  <option value ="20">20</option>
                  <option value="30">30</option>
                </select>
            </li> 
            <!-- li><a href="#" class="prev"></a></li>
            <li>1/135</li>
            <li><a href="#" class="next"></a></li>
            <li><input type="text"></li>
            <li><a href="#" class="btn2">跳转</a></li>
            <li>共135项</li> -->
            {$page}
        </ul>
      
    </div>
</div>      
<div class="searchPopup">
    <div class="searchPopup-mask"></div>
    <div class="searchPopup-con">
        <span class="close"></span>
        <form action="" method="post">
            <dl class="searchText">
                <dt><input type="text" class="t" name="" value=""></dt>
                <dd><input type="submit" class="subBtn" value=""></dd>
                <dd>
                    <ul id="suggestions">  
                    </ul>
                </dd>
            </dl>
            <ul class="sPopup-list">
                <!-- <li><label><em><i></i></em><input name="ks" type="checkbox" value="中医肿瘤科"/>中医肿瘤科</label></li>
                <li><label><em><i></i></em><input name="ks" type="checkbox" value="妇科" />妇科</label></li> 
                <li><label><em><i></i></em><input name="ks" type="checkbox" value="中医消化科" />中医消化科</label></li> 
                <li><label><em><i></i></em><input name="ks" type="checkbox" value="中老年病" />中老年病</label></li> 
                <li><label><em><i></i></em><input name="ks" type="checkbox" value="中医神经科" />中医神经科</label></li>
                <li><label><em><i></i></em><input name="ks" type="checkbox" value="中医呼吸科" />中医呼吸科</label></li>
                <li><label><em><i></i></em><input name="ks" type="checkbox" value="中医皮肤科" />中医皮肤科</label></li> -->
            </ul>
            <div class="btns">
                <input type="submit" value="确认" class="submit" onclick="GetGain()" id="button">
                <input type="button" value="取消" class="close-btn">
            </div>
        </form>
    </div>  
</div> 
<script> 
       function uniq(array) {

        var temp = []; //一个新的临时数组
        for (var i = 0; i < array.length; i++) {
            if (temp.indexOf(array[i]) == -1) {
                temp.push(array[i]);
            }
        }
        return temp;
    }
      function GetGain() {

        var again = new Array();
        var yuyueks = new Array();
        var yuyuezj = new Array();
        var yuyuebz = new Array();  
        var mtly = new Array();
        var yyfs = new Array(); 


        $(".quzhi").each(function () {
            var name = $(this).attr("name");

            if (name == 'ks') {
                $("input[type=checkbox][checked]").each(function () { //由于复选框一般选中的是多个,所以可以循环输出
                    console.log($(this).val());
                    yuyueks.push($(this).val());
                });
                yuyueks = uniq(yuyueks);
//                console.log(yuyueks);
                document.getElementById('keshi').value = yuyueks;
            } else if (name == 'zj') {
                $("input[type=checkbox][checked]").each(function () { //由于复选框一般选中的是多个,所以可以循环输出
                    yuyuezj.push($(this).val());
                });
                yuyuezj = uniq(yuyuezj);
                document.getElementById('zhuanjia').value = yuyuezj;
            } else if (name == 'bz') {
                $("input[type=checkbox][checked]").each(function () { //由于复选框一般选中的是多个,所以可以循环输出
                    yuyuebz.push($(this).val());
                    yuyuebz = uniq(yuyuebz);
                    document.getElementById('bing').value = yuyuebz;
                });
            }  else if (name == 'ly') {
                $("input[type=checkbox][checked]").each(function () { //由于复选框一般选中的是多个,所以可以循环输出
                    source.push($(this).val());
                    source = uniq(source);
                    document.getElementById('laiyuan').value = source;
                });
            } else if (name == 'cf') {
                $("input[type=checkbox][checked]").each(function () { //由于复选框一般选中的是多个,所以可以循环输出
                    again.push($(this).val());
                    again = uniq(again);
                    document.getElementById('chufu').value = again;
                });
            } else if (name == 'fs') {
                $("input[type=checkbox][checked]").each(function () { //由于复选框一般选中的是多个,所以可以循环输出
                    again.push($(this).val());
                    again = uniq(again);
                    document.getElementById('chufu').value = again;
                });
            } 


        });
    }
</script> 
</body>
</html>
