<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<title>预约方式 - 媒体来源</title>
<bootstrapcss/>
</head>
<body>
<div class="bjy-admin-nav"><a href="{:U('Admin/Index/index')}"><i class="fa fa-home"></i> 首页</a> &gt; 预约方式</div>

<ul id="myTab" class="nav nav-tabs"><li class="active"> <a href="#home" data-toggle="tab">媒体来源列表</a></li><li> <a href="javascript:;" onclick="add()">添加媒体来源</a></li><li> <a href="javascript:;" onclick="modeadd()">预约方式来源</a></li>
</ul>
<!-- <form action="{:U('Admin/Make/order')}" method="post"> -->
<div id="myTabContent" class="tab-content"><div class="tab-pane fade in active" id="home">
<table class="table table-striped table-bordered table-hover table-condensed"><tr><th>预约方式名</th>
<th>操作</th>
</tr>
<foreach name="mode" item="mode">
<tr>

<td>{$mode['name']}</td>

	<td> <a href="javascript:;" navId="{$mode['id']}" navName="{$mode['name']}" navMca="{$mode['name']}" navIco="{$mode['name']}" onclick="modeedit(this)">修改</a> | <a href="javascript:if(confirm('确定删除？'))location='{:U('Admin/Make/modeDelete',array('id'=>$mode['id']))}'">删除</a></td>
</tr>
</foreach>
</table>
</div>
</div>









<!-- <ul id="myTab" class="nav nav-tabs"><li class="active"> <a href="#home" data-toggle="tab">媒体来源列表</a></li><li> <a href="javascript:;" onclick="add()">添加媒体来源</a></li>
</ul> -->
<!-- <form action="{:U('Admin/Make/order')}" method="post"> -->
<div id="myTabContent" class="tab-content"><div class="tab-pane fade in active" id="home">
<table class="table table-striped table-bordered table-hover table-condensed"><tr><th>媒体来源名</th>
<th>操作</th>
</tr>
<foreach name="data" item="data">
<tr>

<if condition="$data['level'] eq 1">
<td>&nbsp└─{$data['name']}</td>
<else/><td>{$data['name']}</td></if>

	<td> <if condition="$data['level'] eq 0"><a href="javascript:;" navId="{$data['id']}" navName="{$data['name']}" onclick="add_child(this)">添加媒体来源</a> |</if> <a href="javascript:;" navId="{$data['id']}" navName="{$data['name']}" navMca="{$data['name']}" navIco="{$data['name']}" onclick="edit(this)">修改</a> | <a href="javascript:if(confirm('确定删除？'))location='{:U('Admin/Make/sourcesDelete',array('id'=>$data['id']))}'">删除</a></td>
</tr>
</foreach>
</table>
</div>
</div>


<div class="modal fade" id="bjy-modeadd" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true"> &times;</button>
<h4 class="modal-title" id="myModalLabel"> 添加预约方式</h4>
</div>
<div class="modal-body">
<form id="bjy-form" class="form-inline" action="{:U('Admin/Make/modeAdd')}" method="post">
<input type="hidden" name="pid" value="0">
<table class="table table-striped table-bordered table-hover table-condensed">
<tr><th>预约方式：</th><td>
<input class="form-control" type="text" name="mca" id="mca1"> 例如 商务通</td></tr>

<tr><td>

<input class="btn btn-success"  value="添加" onclick="formSubmit()" type="text" style="width: 60px;"></td></tr>
</table>
</form>
</div>
</div>
</div>
</div>

<div class="modal fade" id="bjy-modeedit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true"> &times;</button>
<h4 class="modal-title" id="myModalLabel"> 修改预约方式</h4>
</div><div class="modal-body">
<form id="bjy-form" class="form-inline" action="{:U('Admin/Make/modeEdit')}" method="post">
<input type="hidden" name="id">
<table class="table table-striped table-bordered table-hover table-condensed"><tr><th width="12%">预约方式名：</th><td>
<input class="form-control" type="text" name="name"></td></tr><tr><th></th><td>
<input class="btn btn-success" type="submit" value="修改"></td></tr>
</table>
</form>
</div>
</div>
</div>
</div>


<!-- </form> -->
<div class="modal fade" id="bjy-add" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true"> &times;</button>
<h4 class="modal-title" id="myModalLabel"> 添加媒体来源</h4>
</div>
<div class="modal-body">
<form id="bjy-form" class="form-inline" action="{:U('Admin/Make/sourcesAdd')}" method="post">
<input type="hidden" name="pid" value="0">
<table class="table table-striped table-bordered table-hover table-condensed">
<tr><th>媒体来源：</th><td>
<input class="form-control" type="text" name="mca" id="mca2"> 例如 百度</td></tr>
<tr><th>预约方式：</th><td>
<select name="mode"><option>请选择预约方式</option><foreach name="modes" item="modes"><option value="{$modes.id}">{$modes.name}</option></foreach></select></td></tr>
<tr><td>

<input class="btn btn-success"  value="添加" onclick="formSubmitq()" type="text" style="width: 60px;"></td></tr>
</table>
</form>
</div>
</div>
</div>
</div>




<div class="modal fade" id="bjy-edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true"> &times;</button>
<h4 class="modal-title" id="myModalLabel"> 修改媒体来源</h4>
</div><div class="modal-body">
<form id="bjy-form" class="form-inline" action="{:U('Admin/Make/sourcesEdit')}" method="post">
<input type="hidden" name="id">
<table class="table table-striped table-bordered table-hover table-condensed"><tr><th width="12%">媒体来源名：</th><td>
<input class="form-control" type="text" name="name"></td></tr><tr><th></th><td>
<input class="btn btn-success" type="submit" value="修改"></td></tr>
</table>
</form>
</div>
</div>
</div>
</div>
<bootstrapjs/>
<script>
// 添加菜单
function add(){
	$("input[name='name'],input[name='mca']").val('');
	$('#bjy-add').modal('show');
}
function formSubmit()
{
	var mac = $("#mca1").val();
	if (mac == '' ) {
		alert('请填写媒体来源')
	}else{
		//document.getElementById("bjy-form").submit()
		$("#bjy-form").submit()
	}
}
function formSubmitq()
{
	var mac = $("#mca2").val();
	if (mac == '' ) {
		alert('请填写媒体来源')
	}else{
		$("#bjy-form").submit()
	}
}
  
function modeadd(){
	$("input[name='name'],input[name='mca']").val('');
	$("input[name='pid']").val(0);
	$('#bjy-modeadd').modal('show');
}

// 添加子菜单
function add_child(obj){
	var navId=$(obj).attr('navId');
	$("input[name='pid']").val(navId);
	$("input[name='name']").val('');
	$("input[name='mca']").val('');
	$("input[name='ico']").val('');
	$('#bjy-add').modal('show');
}

// 修改菜单
function edit(obj){
	var navId=$(obj).attr('navId');
	var navName=$(obj).attr('navName');
	var navMca=$(obj).attr('navMca');
	var navIco=$(obj).attr('navIco');
	$("input[name='id']").val(navId);
	$("input[name='name']").val(navName);
	$("input[name='mca']").val(navMca);
	$("input[name='ico']").val(navIco);
	$('#bjy-edit').modal('show');
}


function modeedit(obj){
	var navId=$(obj).attr('navId');
	var navName=$(obj).attr('navName');
	var navMca=$(obj).attr('navMca');
	var navIco=$(obj).attr('navIco');
	$("input[name='id']").val(navId);
	$("input[name='name']").val(navName);
	$("input[name='mca']").val(navMca);
	$("input[name='ico']").val(navIco);
	$('#bjy-modeedit').modal('show');
}
</script></body></html>